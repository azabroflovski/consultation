"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Loading=function(){function e(t){var n=this;_classCallCheck(this,e),this._loading=!0,this.props=t,this.template='\n            <div class="loading">\n                <div class="loading-spinner"></div>\n                <div class="loading-text">'.concat(t.text,"</div>\n            </div>\n        "),document.body.innerHTML+=this.template,window.addEventListener("load",function(e){setTimeout(function(){n.loading=!1,t.loaded()},t.delay||0)})}return _createClass(e,[{key:"status",value:function(e){e?this.start():this.stop()}},{key:"start",value:function(){document.querySelector(".loading").classList.remove("loaded")}},{key:"stop",value:function(){document.querySelector(".loading").classList.add("loaded"),setTimeout(function(){document.querySelector(".loading").remove()},200)}},{key:"loading",set:function(e){this.status(e),this._loading=e}}]),e}(),loading=new Loading({delay:0,text:"Загрузка...",loaded:pageLoaded});function pageLoaded(){new function(e){var t=document.querySelector(e.el),n=t.querySelector(".app-modal-close"),o=e.triggers||[],a=this;function r(e){e.preventDefault(),window.addEventListener("keyup",c),t.classList.add("app-modal--visible")}function i(e){window.removeEventListener("keyup",c),t.classList.remove("app-modal--visible")}function l(e){var o=e.target;o===t&&i(),function(e){return e===n}(o)&&i()}function c(e){27==e.keyCode&&a.close()}o.length>0&&o.forEach(function(e){for(var t=document.querySelectorAll(e),n=0;n<t.length;n++)t[n].addEventListener("click",r)}),t.addEventListener("click",l),this.open=r,this.close=i}({el:"#app-modal-contact",triggers:[".app-modal-contact-trigger"]});var e=document.querySelector(".app-header").getBoundingClientRect().top;window.addEventListener("scroll",function(){this.console.log(e),window.scrollY>e?document.querySelector("#app-header").classList.add("bg"):document.querySelector("#app-header").classList.remove("bg")});tns({container:".app-section-projects-slider",items:1,nav:!0,speed:400,mouseDrag:!0,responsive:{992:{mouseDrag:!1}},controls:!1,axis:"horizontal",navContainer:".app-section-projects-slider-names"});!function(){for(var e=document.querySelectorAll(".clickable"),t=function(t){var n=e[t];n.addEventListener("click",function(e){var t=n.getAttribute("data-to");window.location.href=t})},n=0;n<e.length;n++)t(n)}(),ymaps.ready(function(){new ymaps.Map("app-section-contacts-map",{center:[55.74312287,37.62794645],zoom:18,controls:["zoomControl"],behaviors:["drag"]}).geoObjects.add(new ymaps.Placemark([55.74312287,37.62794645]),{balloonContent:"<strong>РњС‹ Р·РґРµСЃСЊ</strong>"})});var t=new SmoothScroll,n=document.querySelectorAll("[data-scroll]");if(console.log(n),n.length>0)for(var o=0;o<n.length;o++){n[o].addEventListener("click",function(){var e=document.querySelector(this.getAttribute("data-scroll")),n=this.getAttribute("data-scroll-offset")||80;t.animateScroll(e,null,{offset:n})})}function a(e,t,n){for(var o=e.replace(/[^0-9]/g,"").split(""),a=0,r="",i=0;i<t.length;i++){var l=t[i];o[a]?/\*/.test(l)?(r+=o[a],a++):r+=l:n&&n.split("")[i]&&(r+=n.split("")[i])}return r}new function(e){var t=document.querySelector(e.form);t.addEventListener("click",function(e){var t=e.target;if(t.hasAttribute("data-action")){var n=t.getAttribute("data-action");o[n]()}}),t.addEventListener("submit",function(e){e.preventDefault(),console.log("native submit canceled")});var n=t.querySelectorAll("input"),o={Submit:function(){console.log("Submit called");for(var e=0;e<n.length;e++)for(var t=n[e],o=t.getAttribute("data-validate").split(":"),c=t.value.trim(),s=0;s<o.length;s++){if(!l(o[s],c)){a(t);break}r(t)}document.querySelectorAll(".error").length<1&&(document.querySelector(".app-modal-form").classList.add("sending"),Ajax.post({url:"/mail.php",data:i(),complete:function(e){setTimeout(function(){document.querySelector(".app-modal-form").classList.remove("sending"),document.querySelector(".app-modal-form").classList.add("complete"),setTimeout(function(){document.querySelector(".app-modal-form").classList.remove("complete")},5e3)},800)}}),i())}};function a(e){var t=e.getAttribute("data-error-text"),n=e.nextElementSibling;e.parentElement.classList.add("error"),n.innerHTML=t}function r(e){var t=e.nextElementSibling;e.parentElement.classList.remove("error"),t.innerHTML="",console.log("remove")}function i(){for(var e={},t=0;t<n.length;t++){var o=n[t];e[o.getAttribute("name")]=o.value}return console.log(e),e}function l(e,t){return c[e].test(t)}var c={number:/^\d+$/,phone:/^[0-9-+()]*$/,required:/^[\s\t\r\n]*\S+/,email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}}({form:"#contact-form"}),document.querySelectorAll("[data-mask]").forEach(function(e){function t(e){var t=a(e.value,e.getAttribute("data-format"));if(e.value=a(e.value,e.getAttribute("data-format"),e.getAttribute("data-mask")),e.createTextRange){var n=e.createTextRange();n.move("character",t.length),n.select()}else e.selectionStart&&(e.focus(),e.setSelectionRange(t.length,t.length))}e.addEventListener("input",function(){t(e)}),t(e)})}